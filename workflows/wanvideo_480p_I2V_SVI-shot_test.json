{
  "id": "206247b6-9fec-4ed2-8927-e4f388c674d4",
  "revision": 0,
  "last_node_id": 182,
  "last_link_id": 317,
  "nodes": [
    {
      "id": 46,
      "type": "WanVideoTextEmbedBridge",
      "pos": [
        971.258415005119,
        1439.4372006840924
      ],
      "size": [
        315,
        46
      ],
      "flags": {},
      "order": 34,
      "mode": 2,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 54
        },
        {
          "name": "negative",
          "shape": 7,
          "type": "CONDITIONING",
          "link": 55
        }
      ],
      "outputs": [
        {
          "name": "text_embeds",
          "type": "WANVIDEOTEXTEMBEDS",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoTextEmbedBridge"
      },
      "widgets_values": []
    },
    {
      "id": 50,
      "type": "CLIPTextEncode",
      "pos": [
        521.2589948391034,
        1699.4371396489369
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 24,
      "mode": 2,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 53
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            55
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.26",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走"
      ]
    },
    {
      "id": 48,
      "type": "CLIPLoader",
      "pos": [
        161.25946023216997,
        1449.4372006840924
      ],
      "size": [
        315,
        106
      ],
      "flags": {},
      "order": 0,
      "mode": 2,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "slot_index": 0,
          "links": [
            52,
            53
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.26",
        "Node name for S&R": "CLIPLoader"
      },
      "widgets_values": [
        "umt5_xxl_fp16.safetensors",
        "wan",
        "default"
      ]
    },
    {
      "id": 49,
      "type": "CLIPTextEncode",
      "pos": [
        521.2589948391034,
        1449.4372006840924
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 23,
      "mode": 2,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 52
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            54
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.26",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "high quality nature video featuring a red panda balancing on a bamboo stem while a bird lands on it's head, on the background there is a waterfall"
      ]
    },
    {
      "id": 51,
      "type": "Note",
      "pos": [
        191.25940682640822,
        1279.4367734379987
      ],
      "size": [
        253.16725158691406,
        88
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "You can also use native ComfyUI text encoding with these nodes instead of the original, the models are node specific and can't otherwise be mixed."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 28,
      "type": "WanVideoDecode",
      "pos": [
        1688.0194091796875,
        -647.6461791992188
      ],
      "size": [
        315,
        198
      ],
      "flags": {},
      "order": 42,
      "mode": 0,
      "inputs": [
        {
          "name": "vae",
          "type": "WANVAE",
          "link": 43
        },
        {
          "name": "samples",
          "type": "LATENT",
          "link": 33
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            36,
            237
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoDecode"
      },
      "widgets_values": [
        false,
        272,
        272,
        144,
        128,
        "default"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 72,
      "type": "WanVideoLoraSelect",
      "pos": [
        -405.48115720265275,
        -1273.8874073941506
      ],
      "size": [
        583.5029907226562,
        200
      ],
      "flags": {},
      "order": 26,
      "mode": 0,
      "inputs": [
        {
          "name": "prev_lora",
          "shape": 7,
          "type": "WANVIDLORA",
          "link": 150
        },
        {
          "name": "blocks",
          "shape": 7,
          "type": "SELECTEDBLOCKS",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "lora",
          "type": "WANVIDLORA",
          "links": [
            213
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "6b9565ed6307168c45770ec08517d7df65b61e3f",
        "Node name for S&R": "WanVideoLoraSelect"
      },
      "widgets_values": [
        "WanVideo\\SVI\\svi_shot_lora_fp32.safetensors",
        1,
        false,
        false,
        "<details><summary><b>Metadata</b></summary><table border='0' cellpadding='3'><tr><td colspan='2'><b>Metadata</b></td></tr><tr><td><b>format</b></td><td>pt</td></tr></table></details>"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 114,
      "type": "WanVideoVACEStartToEndFrame",
      "pos": [
        2720.2670450389132,
        434.32869845282255
      ],
      "size": [
        329.9634765625,
        190
      ],
      "flags": {},
      "order": 51,
      "mode": 0,
      "inputs": [
        {
          "name": "start_image",
          "shape": 7,
          "type": "IMAGE",
          "link": 272
        },
        {
          "name": "end_image",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "control_images",
          "shape": 7,
          "type": "IMAGE",
          "link": 195
        },
        {
          "name": "inpaint_mask",
          "shape": 7,
          "type": "MASK",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            197
          ]
        },
        {
          "name": "masks",
          "type": "MASK",
          "links": [
            190
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "67fcf0ba529b7e646eb896371fdb3c7fb48193a0",
        "Node name for S&R": "WanVideoVACEStartToEndFrame"
      },
      "widgets_values": [
        81,
        0.5,
        0,
        -1
      ]
    },
    {
      "id": 118,
      "type": "SimpleMath+",
      "pos": [
        2439.711805533986,
        -391.8058763738386
      ],
      "size": [
        270,
        98
      ],
      "flags": {},
      "order": 46,
      "mode": 0,
      "inputs": [
        {
          "name": "a",
          "shape": 7,
          "type": "*",
          "link": 199
        },
        {
          "name": "b",
          "shape": 7,
          "type": "*",
          "link": null
        },
        {
          "name": "c",
          "shape": 7,
          "type": "*",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            201
          ]
        },
        {
          "name": "FLOAT",
          "type": "FLOAT",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "kijai/ComfyUI_essentials",
        "ver": "76e9d1e4399bd025ce8b12c290753d58f9f53e93",
        "Node name for S&R": "SimpleMath+"
      },
      "widgets_values": [
        "a - 1"
      ]
    },
    {
      "id": 117,
      "type": "WanVideoImageToVideoEncode",
      "pos": [
        2716.4638404152856,
        -151.40361598719772
      ],
      "size": [
        352.79998779296875,
        390
      ],
      "flags": {},
      "order": 53,
      "mode": 0,
      "inputs": [
        {
          "name": "vae",
          "shape": 7,
          "type": "WANVAE",
          "link": 210
        },
        {
          "name": "clip_embeds",
          "shape": 7,
          "type": "WANVIDIMAGE_CLIPEMBEDS",
          "link": 278
        },
        {
          "name": "start_image",
          "shape": 7,
          "type": "IMAGE",
          "link": 197
        },
        {
          "name": "end_image",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "control_embeds",
          "shape": 7,
          "type": "WANVIDIMAGE_EMBEDS",
          "link": null
        },
        {
          "name": "temporal_mask",
          "shape": 7,
          "type": "MASK",
          "link": 198
        },
        {
          "name": "extra_latents",
          "shape": 7,
          "type": "LATENT",
          "link": null
        },
        {
          "name": "add_cond_latents",
          "shape": 7,
          "type": "ADD_COND_LATENTS",
          "link": null
        },
        {
          "name": "width",
          "type": "INT",
          "widget": {
            "name": "width"
          },
          "link": 211
        },
        {
          "name": "height",
          "type": "INT",
          "widget": {
            "name": "height"
          },
          "link": 212
        },
        {
          "name": "num_frames",
          "type": "INT",
          "widget": {
            "name": "num_frames"
          },
          "link": 263
        }
      ],
      "outputs": [
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "links": [
            192
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoImageToVideoEncode"
      },
      "widgets_values": [
        832,
        480,
        81,
        0,
        1,
        1,
        true,
        false,
        false
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 35,
      "type": "WanVideoTorchCompileSettings",
      "pos": [
        -1120.6951096105695,
        -1303.2595283317546
      ],
      "size": [
        390.5999755859375,
        226
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "torch_compile_args",
          "type": "WANCOMPILEARGS",
          "slot_index": 0,
          "links": [
            98
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoTorchCompileSettings"
      },
      "widgets_values": [
        "inductor",
        false,
        "default",
        false,
        64,
        true,
        128,
        false
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 69,
      "type": "WanVideoLoraSelect",
      "pos": [
        -408.8485200904023,
        -1504.1233487493664
      ],
      "size": [
        583.5029907226562,
        176
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [
        {
          "name": "prev_lora",
          "shape": 7,
          "type": "WANVIDLORA",
          "link": null
        },
        {
          "name": "blocks",
          "shape": 7,
          "type": "SELECTEDBLOCKS",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "lora",
          "type": "WANVIDLORA",
          "links": [
            150
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "6b9565ed6307168c45770ec08517d7df65b61e3f",
        "Node name for S&R": "WanVideoLoraSelect"
      },
      "widgets_values": [
        "WanVideo\\Lightx2v\\lightx2v_I2V_14B_480p_cfg_step_distill_rank64_bf16.safetensors",
        1,
        false,
        false
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 22,
      "type": "WanVideoModelLoader",
      "pos": [
        -1110.0471102146,
        -1007.8528242939867
      ],
      "size": [
        527.3238745609531,
        338
      ],
      "flags": {},
      "order": 25,
      "mode": 0,
      "inputs": [
        {
          "name": "compile_args",
          "shape": 7,
          "type": "WANCOMPILEARGS",
          "link": 98
        },
        {
          "name": "block_swap_args",
          "shape": 7,
          "type": "BLOCKSWAPARGS",
          "link": null
        },
        {
          "name": "lora",
          "shape": 7,
          "type": "WANVIDLORA",
          "link": null
        },
        {
          "name": "vram_management_args",
          "shape": 7,
          "type": "VRAM_MANAGEMENTARGS",
          "link": null
        },
        {
          "name": "extra_model",
          "shape": 7,
          "type": "VACEPATH",
          "link": null
        },
        {
          "name": "fantasytalking_model",
          "shape": 7,
          "type": "FANTASYTALKINGMODEL",
          "link": null
        },
        {
          "name": "multitalk_model",
          "shape": 7,
          "type": "MULTITALKMODEL",
          "link": null
        },
        {
          "name": "fantasyportrait_model",
          "shape": 7,
          "type": "FANTASYPORTRAITMODEL",
          "link": null
        },
        {
          "name": "vace_model",
          "shape": 7,
          "type": "VACEPATH",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "model",
          "type": "WANVIDEOMODEL",
          "slot_index": 0,
          "links": [
            90
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoModelLoader"
      },
      "widgets_values": [
        "WanVideo\\fp8_scaled_kj\\I2V\\Wan2_1-I2V-14B-480p_fp8_e4m3fn_scaled_KJ.safetensors",
        "fp16_fast",
        "disabled",
        "offload_device",
        "sageattn_compiled",
        "default"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 71,
      "type": "WanVideoSetLoRAs",
      "pos": [
        -157.74192837054548,
        -1008.310761749407
      ],
      "size": [
        174.5337890625,
        46
      ],
      "flags": {},
      "order": 38,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "WANVIDEOMODEL",
          "link": 94
        },
        {
          "name": "lora",
          "shape": 7,
          "type": "WANVIDLORA",
          "link": 213
        }
      ],
      "outputs": [
        {
          "name": "model",
          "type": "WANVIDEOMODEL",
          "links": [
            214
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "67fcf0ba529b7e646eb896371fdb3c7fb48193a0",
        "Node name for S&R": "WanVideoSetLoRAs"
      },
      "widgets_values": [],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 39,
      "type": "WanVideoBlockSwap",
      "pos": [
        -494.94475467877635,
        -888.7572851691182
      ],
      "size": [
        315,
        202
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "block_swap_args",
          "type": "BLOCKSWAPARGS",
          "slot_index": 0,
          "links": [
            92
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoBlockSwap"
      },
      "widgets_values": [
        10,
        false,
        false,
        true,
        0,
        0,
        false
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 63,
      "type": "WanVideoImageToVideoEncode",
      "pos": [
        94.36457833581171,
        22.63092309078807
      ],
      "size": [
        352.79998779296875,
        390
      ],
      "flags": {},
      "order": 39,
      "mode": 0,
      "inputs": [
        {
          "name": "vae",
          "shape": 7,
          "type": "WANVAE",
          "link": 81
        },
        {
          "name": "clip_embeds",
          "shape": 7,
          "type": "WANVIDIMAGE_CLIPEMBEDS",
          "link": 82
        },
        {
          "name": "start_image",
          "shape": 7,
          "type": "IMAGE",
          "link": 143
        },
        {
          "name": "end_image",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "control_embeds",
          "shape": 7,
          "type": "WANVIDIMAGE_EMBEDS",
          "link": null
        },
        {
          "name": "temporal_mask",
          "shape": 7,
          "type": "MASK",
          "link": null
        },
        {
          "name": "extra_latents",
          "shape": 7,
          "type": "LATENT",
          "link": null
        },
        {
          "name": "add_cond_latents",
          "shape": 7,
          "type": "ADD_COND_LATENTS",
          "link": null
        },
        {
          "name": "width",
          "type": "INT",
          "widget": {
            "name": "width"
          },
          "link": 87
        },
        {
          "name": "height",
          "type": "INT",
          "widget": {
            "name": "height"
          },
          "link": 88
        }
      ],
      "outputs": [
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "links": [
            66
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoImageToVideoEncode"
      },
      "widgets_values": [
        832,
        480,
        81,
        0,
        1,
        1,
        true,
        false,
        false
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 130,
      "type": "GetNode",
      "pos": [
        3132.5094347793724,
        -292.2884706305255
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "WANVIDEOMODEL",
          "type": "WANVIDEOMODEL",
          "links": [
            219
          ]
        }
      ],
      "title": "Get_model",
      "properties": {},
      "widgets_values": [
        "model"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 129,
      "type": "GetNode",
      "pos": [
        789.8707037774894,
        -82.97570893430756
      ],
      "size": [
        210,
        34
      ],
      "flags": {
        "collapsed": true
      },
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "WANTEXTENCODER",
          "type": "WANTEXTENCODER",
          "links": [
            218
          ]
        }
      ],
      "title": "Get_text_encoder",
      "properties": {},
      "widgets_values": [
        "text_encoder"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 131,
      "type": "GetNode",
      "pos": [
        3549.1237109395724,
        109.1787720454234
      ],
      "size": [
        210,
        34
      ],
      "flags": {
        "collapsed": true
      },
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "WANTEXTENCODER",
          "type": "WANTEXTENCODER",
          "links": [
            220
          ]
        }
      ],
      "title": "Get_text_encoder",
      "properties": {},
      "widgets_values": [
        "text_encoder"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 30,
      "type": "VHS_VideoCombine",
      "pos": [
        1690.1850021678665,
        -331.9254441205017
      ],
      "size": [
        412.02090593793537,
        740.0209059379354
      ],
      "flags": {},
      "order": 43,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 36
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0a75c7958fe320efcb052f1d9f8451fd20c730a8",
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "WanVideoWrapper_I2V",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": false,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "WanVideoWrapper_I2V_00046.mp4",
            "subfolder": "",
            "type": "temp",
            "format": "video/h264-mp4",
            "frame_rate": 16,
            "workflow": "WanVideoWrapper_I2V_00046.png",
            "fullpath": "N:\\AI\\ComfyUI\\temp\\WanVideoWrapper_I2V_00046.mp4"
          }
        }
      }
    },
    {
      "id": 120,
      "type": "VHS_VideoCombine",
      "pos": [
        4114.108171620443,
        -442.3387267164184
      ],
      "size": [
        865.744639697281,
        1193.744639697281
      ],
      "flags": {},
      "order": 59,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 261
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0a75c7958fe320efcb052f1d9f8451fd20c730a8",
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "WanVideoWrapper_I2V",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": false,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "WanVideoWrapper_I2V_00051.mp4",
            "subfolder": "",
            "type": "temp",
            "format": "video/h264-mp4",
            "frame_rate": 16,
            "workflow": "WanVideoWrapper_I2V_00051.png",
            "fullpath": "N:\\AI\\ComfyUI\\temp\\WanVideoWrapper_I2V_00051.mp4"
          }
        }
      }
    },
    {
      "id": 116,
      "type": "WanVideoTextEncode",
      "pos": [
        3541.334952293256,
        160.98685128244895
      ],
      "size": [
        420.30511474609375,
        261.5306701660156
      ],
      "flags": {},
      "order": 28,
      "mode": 0,
      "inputs": [
        {
          "name": "t5",
          "shape": 7,
          "type": "WANTEXTENCODER",
          "link": 220
        },
        {
          "name": "model_to_offload",
          "shape": 7,
          "type": "WANVIDEOMODEL",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "text_embeds",
          "type": "WANVIDEOTEXTEMBEDS",
          "slot_index": 0,
          "links": [
            193
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoTextEncode"
      },
      "widgets_values": [
        "an old man crying",
        "色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走",
        true,
        false,
        "gpu"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 58,
      "type": "LoadImage",
      "pos": [
        -1197.7303122852024,
        20.191707680210648
      ],
      "size": [
        413.10479736328125,
        498.3180847167969
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            147
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.26",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "oldman_upscaled.png",
        "image"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 70,
      "type": "WanVideoSetBlockSwap",
      "pos": [
        -412.41781625417605,
        -1006.3286948115697
      ],
      "size": [
        201.7681640625,
        46
      ],
      "flags": {},
      "order": 35,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "WANVIDEOMODEL",
          "link": 90
        },
        {
          "name": "block_swap_args",
          "shape": 7,
          "type": "BLOCKSWAPARGS",
          "link": 92
        }
      ],
      "outputs": [
        {
          "name": "model",
          "type": "WANVIDEOMODEL",
          "links": [
            94
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "5406a72f62adf4a31a8a0a0e4923cc5288399652",
        "Node name for S&R": "WanVideoSetBlockSwap"
      },
      "widgets_values": [],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 11,
      "type": "LoadWanVideoT5TextEncoder",
      "pos": [
        -1105.915810276484,
        -607.9428585009022
      ],
      "size": [
        377.1661376953125,
        130
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "wan_t5_model",
          "type": "WANTEXTENCODER",
          "slot_index": 0,
          "links": [
            216
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "LoadWanVideoT5TextEncoder"
      },
      "widgets_values": [
        "umt5-xxl-enc-bf16.safetensors",
        "bf16",
        "offload_device",
        "disabled"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 127,
      "type": "SetNode",
      "pos": [
        -625.4139767569101,
        -582.0714034800917
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 30,
      "mode": 0,
      "inputs": [
        {
          "name": "WANTEXTENCODER",
          "type": "WANTEXTENCODER",
          "link": 216
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_text_encoder",
      "properties": {
        "previousName": "text_encoder"
      },
      "widgets_values": [
        "text_encoder"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 38,
      "type": "WanVideoVAELoader",
      "pos": [
        -639.606646928469,
        -491.2246156493049
      ],
      "size": [
        372.7727966308594,
        82
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "compile_args",
          "shape": 7,
          "type": "WANCOMPILEARGS",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "vae",
          "type": "WANVAE",
          "slot_index": 0,
          "links": [
            43,
            81,
            207
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoVAELoader"
      },
      "widgets_values": [
        "wanvideo\\Wan2_1_VAE_bf16.safetensors",
        "bf16"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 123,
      "type": "SetNode",
      "pos": [
        -219.7107880183023,
        -501.85910010902154
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 31,
      "mode": 0,
      "inputs": [
        {
          "name": "WANVAE",
          "type": "WANVAE",
          "link": 207
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_VAE",
      "properties": {
        "previousName": "VAE"
      },
      "widgets_values": [
        "VAE"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 126,
      "type": "GetNode",
      "pos": [
        1154.2257960419859,
        -419.82195894577336
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 11,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "WANVIDEOMODEL",
          "type": "WANVIDEOMODEL",
          "links": [
            215
          ]
        }
      ],
      "title": "Get_model",
      "properties": {},
      "widgets_values": [
        "model"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 112,
      "type": "RepeatImageBatch",
      "pos": [
        2506.6588377634966,
        505.352354958548
      ],
      "size": [
        270,
        58
      ],
      "flags": {
        "collapsed": true
      },
      "order": 50,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 271
        },
        {
          "name": "amount",
          "type": "INT",
          "widget": {
            "name": "amount"
          },
          "link": 264
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            195
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.65",
        "Node name for S&R": "RepeatImageBatch"
      },
      "widgets_values": [
        81
      ]
    },
    {
      "id": 150,
      "type": "INTConstant",
      "pos": [
        2500.950823160664,
        447.5252966343098
      ],
      "size": [
        200,
        58
      ],
      "flags": {
        "collapsed": true
      },
      "order": 12,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "value",
          "type": "INT",
          "links": [
            263,
            264
          ]
        }
      ],
      "title": "num_frames",
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "INTConstant"
      },
      "widgets_values": [
        81
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 111,
      "type": "InvertMask",
      "pos": [
        2742.6331414776446,
        353.50433229668596
      ],
      "size": [
        140,
        26
      ],
      "flags": {
        "collapsed": true
      },
      "order": 52,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 190
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            198
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.65",
        "Node name for S&R": "InvertMask"
      }
    },
    {
      "id": 27,
      "type": "WanVideoSampler",
      "pos": [
        1315.2401123046875,
        -401.48028564453125
      ],
      "size": [
        315,
        999
      ],
      "flags": {},
      "order": 41,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "WANVIDEOMODEL",
          "link": 215
        },
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "link": 66
        },
        {
          "name": "text_embeds",
          "shape": 7,
          "type": "WANVIDEOTEXTEMBEDS",
          "link": 30
        },
        {
          "name": "samples",
          "shape": 7,
          "type": "LATENT",
          "link": null
        },
        {
          "name": "feta_args",
          "shape": 7,
          "type": "FETAARGS",
          "link": null
        },
        {
          "name": "context_options",
          "shape": 7,
          "type": "WANVIDCONTEXT",
          "link": null
        },
        {
          "name": "cache_args",
          "shape": 7,
          "type": "CACHEARGS",
          "link": null
        },
        {
          "name": "flowedit_args",
          "shape": 7,
          "type": "FLOWEDITARGS",
          "link": null
        },
        {
          "name": "slg_args",
          "shape": 7,
          "type": "SLGARGS",
          "link": null
        },
        {
          "name": "loop_args",
          "shape": 7,
          "type": "LOOPARGS",
          "link": null
        },
        {
          "name": "experimental_args",
          "shape": 7,
          "type": "EXPERIMENTALARGS",
          "link": null
        },
        {
          "name": "sigmas",
          "shape": 7,
          "type": "SIGMAS",
          "link": null
        },
        {
          "name": "unianimate_poses",
          "shape": 7,
          "type": "UNIANIMATE_POSE",
          "link": null
        },
        {
          "name": "fantasytalking_embeds",
          "shape": 7,
          "type": "FANTASYTALKING_EMBEDS",
          "link": null
        },
        {
          "name": "uni3c_embeds",
          "shape": 7,
          "type": "UNI3C_EMBEDS",
          "link": null
        },
        {
          "name": "multitalk_embeds",
          "shape": 7,
          "type": "MULTITALK_EMBEDS",
          "link": null
        },
        {
          "name": "freeinit_args",
          "shape": 7,
          "type": "FREEINITARGS",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "slot_index": 0,
          "links": [
            33
          ]
        },
        {
          "name": "denoised_samples",
          "type": "LATENT",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoSampler"
      },
      "widgets_values": [
        8,
        1,
        5,
        0,
        "fixed",
        true,
        "euler",
        0,
        1,
        "",
        "comfy",
        0,
        -1,
        false
      ]
    },
    {
      "id": 125,
      "type": "SetNode",
      "pos": [
        53.04907348296812,
        -980.7158470986786
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 40,
      "mode": 0,
      "inputs": [
        {
          "name": "WANVIDEOMODEL",
          "type": "WANVIDEOMODEL",
          "link": 214
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_model",
      "properties": {
        "previousName": "model"
      },
      "widgets_values": [
        "model"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 16,
      "type": "WanVideoTextEncode",
      "pos": [
        788.9541612449941,
        -22.852232842107718
      ],
      "size": [
        420.30511474609375,
        261.5306701660156
      ],
      "flags": {},
      "order": 27,
      "mode": 0,
      "inputs": [
        {
          "name": "t5",
          "shape": 7,
          "type": "WANTEXTENCODER",
          "link": 218
        },
        {
          "name": "model_to_offload",
          "shape": 7,
          "type": "WANVIDEOMODEL",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "text_embeds",
          "type": "WANVIDEOTEXTEMBEDS",
          "slot_index": 0,
          "links": [
            30
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoTextEncode"
      },
      "widgets_values": [
        "an old man laughing",
        "色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走",
        true,
        false,
        "gpu"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 119,
      "type": "GetImageRangeFromBatch",
      "pos": [
        2790.7398172288,
        -458.74396425971474
      ],
      "size": [
        340.3267578125,
        102
      ],
      "flags": {},
      "order": 49,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "shape": 7,
          "type": "IMAGE",
          "link": 200
        },
        {
          "name": "masks",
          "shape": 7,
          "type": "MASK",
          "link": null
        },
        {
          "name": "num_frames",
          "type": "INT",
          "widget": {
            "name": "num_frames"
          },
          "link": 201
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            203
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "GetImageRangeFromBatch"
      },
      "widgets_values": [
        0,
        1
      ]
    },
    {
      "id": 151,
      "type": "Reroute",
      "pos": [
        2551.770650072426,
        344.0598799141037
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 47,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 270
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "IMAGE",
          "links": [
            271,
            272
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      }
    },
    {
      "id": 113,
      "type": "WanVideoSampler",
      "pos": [
        3135.1422949425773,
        -224.872983152175
      ],
      "size": [
        315,
        999
      ],
      "flags": {},
      "order": 54,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "WANVIDEOMODEL",
          "link": 219
        },
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "link": 192
        },
        {
          "name": "text_embeds",
          "shape": 7,
          "type": "WANVIDEOTEXTEMBEDS",
          "link": 193
        },
        {
          "name": "samples",
          "shape": 7,
          "type": "LATENT",
          "link": null
        },
        {
          "name": "feta_args",
          "shape": 7,
          "type": "FETAARGS",
          "link": null
        },
        {
          "name": "context_options",
          "shape": 7,
          "type": "WANVIDCONTEXT",
          "link": null
        },
        {
          "name": "cache_args",
          "shape": 7,
          "type": "CACHEARGS",
          "link": null
        },
        {
          "name": "flowedit_args",
          "shape": 7,
          "type": "FLOWEDITARGS",
          "link": null
        },
        {
          "name": "slg_args",
          "shape": 7,
          "type": "SLGARGS",
          "link": null
        },
        {
          "name": "loop_args",
          "shape": 7,
          "type": "LOOPARGS",
          "link": null
        },
        {
          "name": "experimental_args",
          "shape": 7,
          "type": "EXPERIMENTALARGS",
          "link": null
        },
        {
          "name": "sigmas",
          "shape": 7,
          "type": "SIGMAS",
          "link": null
        },
        {
          "name": "unianimate_poses",
          "shape": 7,
          "type": "UNIANIMATE_POSE",
          "link": null
        },
        {
          "name": "fantasytalking_embeds",
          "shape": 7,
          "type": "FANTASYTALKING_EMBEDS",
          "link": null
        },
        {
          "name": "uni3c_embeds",
          "shape": 7,
          "type": "UNI3C_EMBEDS",
          "link": null
        },
        {
          "name": "multitalk_embeds",
          "shape": 7,
          "type": "MULTITALK_EMBEDS",
          "link": null
        },
        {
          "name": "freeinit_args",
          "shape": 7,
          "type": "FREEINITARGS",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "slot_index": 0,
          "links": [
            189
          ]
        },
        {
          "name": "denoised_samples",
          "type": "LATENT",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoSampler"
      },
      "widgets_values": [
        8,
        1,
        5,
        0,
        "fixed",
        true,
        "euler",
        0,
        1,
        "",
        "comfy",
        0,
        -1,
        false
      ]
    },
    {
      "id": 121,
      "type": "GetImageSizeAndCount",
      "pos": [
        2426.991009592354,
        -642.6488681703185
      ],
      "size": [
        190.86484375,
        86
      ],
      "flags": {},
      "order": 44,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 237
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            196,
            200
          ]
        },
        {
          "label": "640 width",
          "name": "width",
          "type": "INT",
          "links": [
            211
          ]
        },
        {
          "label": "640 height",
          "name": "height",
          "type": "INT",
          "links": [
            212
          ]
        },
        {
          "label": "81 count",
          "name": "count",
          "type": "INT",
          "links": [
            199
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "GetImageSizeAndCount"
      }
    },
    {
      "id": 124,
      "type": "GetNode",
      "pos": [
        2485.208214550821,
        -230.8696603728563
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 13,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "WANVAE",
          "type": "WANVAE",
          "links": [
            208,
            210
          ]
        }
      ],
      "title": "Get_VAE",
      "properties": {},
      "widgets_values": [
        "VAE"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 65,
      "type": "WanVideoClipVisionEncode",
      "pos": [
        -734.5885922877253,
        -235.02703168133593
      ],
      "size": [
        327.5999755859375,
        262
      ],
      "flags": {},
      "order": 36,
      "mode": 0,
      "inputs": [
        {
          "name": "clip_vision",
          "type": "CLIP_VISION",
          "link": 70
        },
        {
          "name": "image_1",
          "type": "IMAGE",
          "link": 85
        },
        {
          "name": "image_2",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "negative_image",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_CLIPEMBEDS",
          "links": [
            82
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoClipVisionEncode"
      },
      "widgets_values": [
        1,
        1,
        "center",
        "average",
        true,
        0,
        0.20000000000000004
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 115,
      "type": "GetImageRangeFromBatch",
      "pos": [
        2786.943935588045,
        -641.6405355246732
      ],
      "size": [
        340.3267578125,
        102
      ],
      "flags": {},
      "order": 45,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "shape": 7,
          "type": "IMAGE",
          "link": 196
        },
        {
          "name": "masks",
          "shape": 7,
          "type": "MASK",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            270,
            277
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "GetImageRangeFromBatch"
      },
      "widgets_values": [
        -1,
        1
      ]
    },
    {
      "id": 154,
      "type": "WanVideoClipVisionEncode",
      "pos": [
        2338.1200756625954,
        -49.44928481021299
      ],
      "size": [
        327.5999755859375,
        262
      ],
      "flags": {},
      "order": 48,
      "mode": 0,
      "inputs": [
        {
          "name": "clip_vision",
          "type": "CLIP_VISION",
          "link": 316
        },
        {
          "name": "image_1",
          "type": "IMAGE",
          "link": 277
        },
        {
          "name": "image_2",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "negative_image",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_CLIPEMBEDS",
          "links": [
            278
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoClipVisionEncode"
      },
      "widgets_values": [
        1,
        1,
        "center",
        "average",
        true,
        0,
        0.20000000000000004
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 68,
      "type": "ImageResizeKJv2",
      "pos": [
        -710.8313901392878,
        105.09734270831248
      ],
      "size": [
        270,
        336
      ],
      "flags": {},
      "order": 29,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 147
        },
        {
          "name": "mask",
          "shape": 7,
          "type": "MASK",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            85,
            143,
            279
          ]
        },
        {
          "name": "width",
          "type": "INT",
          "links": [
            87
          ]
        },
        {
          "name": "height",
          "type": "INT",
          "links": [
            88
          ]
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "ad37ce656c13e9abea002b46e3a89be3dba32355",
        "Node name for S&R": "ImageResizeKJv2"
      },
      "widgets_values": [
        640,
        640,
        "lanczos",
        "crop",
        "0, 0, 0",
        "center",
        16,
        "cpu",
        "<tr><td>Output: </td><td><b>1</b> x <b>640</b> x <b>640 | 4.69MB</b></td></tr>"
      ]
    },
    {
      "id": 156,
      "type": "SetNode",
      "pos": [
        -365.3861389890068,
        68.36067035232217
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 37,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 279
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_init_image",
      "properties": {
        "previousName": "init_image"
      },
      "widgets_values": [
        "init_image"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 157,
      "type": "GetNode",
      "pos": [
        3523.1608439593697,
        -621.098042595797
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            280
          ]
        }
      ],
      "title": "Get_init_image",
      "properties": {},
      "widgets_values": [
        "init_image"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 110,
      "type": "WanVideoDecode",
      "pos": [
        3537.4808911715327,
        -193.26160126139288
      ],
      "size": [
        315,
        198
      ],
      "flags": {},
      "order": 55,
      "mode": 0,
      "inputs": [
        {
          "name": "vae",
          "type": "WANVAE",
          "link": 208
        },
        {
          "name": "samples",
          "type": "LATENT",
          "link": 189
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            204
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoDecode"
      },
      "widgets_values": [
        false,
        272,
        272,
        144,
        128,
        "default"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 122,
      "type": "ImageBatchMulti",
      "pos": [
        3533.033362048006,
        -446.86246010429346
      ],
      "size": [
        270,
        122
      ],
      "flags": {},
      "order": 56,
      "mode": 0,
      "inputs": [
        {
          "name": "image_1",
          "type": "IMAGE",
          "link": 203
        },
        {
          "name": "image_2",
          "shape": 7,
          "type": "IMAGE",
          "link": 204
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            282
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8"
      },
      "widgets_values": [
        2,
        null
      ]
    },
    {
      "id": 155,
      "type": "ColorMatch",
      "pos": [
        3792.9217871384462,
        -661.7244730886595
      ],
      "size": [
        270,
        126
      ],
      "flags": {},
      "order": 57,
      "mode": 0,
      "inputs": [
        {
          "name": "image_ref",
          "type": "IMAGE",
          "link": 280
        },
        {
          "name": "image_target",
          "type": "IMAGE",
          "link": 282
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            283
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "ColorMatch"
      },
      "widgets_values": [
        "mkl",
        1,
        true
      ]
    },
    {
      "id": 158,
      "type": "WanVideoVACEStartToEndFrame",
      "pos": [
        5694.404807207236,
        477.48717449035325
      ],
      "size": [
        329.9634765625,
        190
      ],
      "flags": {},
      "order": 67,
      "mode": 0,
      "inputs": [
        {
          "name": "start_image",
          "shape": 7,
          "type": "IMAGE",
          "link": 284
        },
        {
          "name": "end_image",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "control_images",
          "shape": 7,
          "type": "IMAGE",
          "link": 285
        },
        {
          "name": "inpaint_mask",
          "shape": 7,
          "type": "MASK",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            289
          ]
        },
        {
          "name": "masks",
          "type": "MASK",
          "links": [
            299
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "67fcf0ba529b7e646eb896371fdb3c7fb48193a0",
        "Node name for S&R": "WanVideoVACEStartToEndFrame"
      },
      "widgets_values": [
        81,
        0.5,
        0,
        -1
      ]
    },
    {
      "id": 159,
      "type": "SimpleMath+",
      "pos": [
        5413.849567702309,
        -348.6474003363079
      ],
      "size": [
        270,
        98
      ],
      "flags": {},
      "order": 62,
      "mode": 0,
      "inputs": [
        {
          "name": "a",
          "shape": 7,
          "type": "*",
          "link": 286
        },
        {
          "name": "b",
          "shape": 7,
          "type": "*",
          "link": null
        },
        {
          "name": "c",
          "shape": 7,
          "type": "*",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            301
          ]
        },
        {
          "name": "FLOAT",
          "type": "FLOAT",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "kijai/ComfyUI_essentials",
        "ver": "76e9d1e4399bd025ce8b12c290753d58f9f53e93",
        "Node name for S&R": "SimpleMath+"
      },
      "widgets_values": [
        "a - 1"
      ]
    },
    {
      "id": 160,
      "type": "WanVideoImageToVideoEncode",
      "pos": [
        5690.601602583609,
        -108.24513994966702
      ],
      "size": [
        352.79998779296875,
        390
      ],
      "flags": {},
      "order": 69,
      "mode": 0,
      "inputs": [
        {
          "name": "vae",
          "shape": 7,
          "type": "WANVAE",
          "link": 287
        },
        {
          "name": "clip_embeds",
          "shape": 7,
          "type": "WANVIDIMAGE_CLIPEMBEDS",
          "link": 288
        },
        {
          "name": "start_image",
          "shape": 7,
          "type": "IMAGE",
          "link": 289
        },
        {
          "name": "end_image",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "control_embeds",
          "shape": 7,
          "type": "WANVIDIMAGE_EMBEDS",
          "link": null
        },
        {
          "name": "temporal_mask",
          "shape": 7,
          "type": "MASK",
          "link": 290
        },
        {
          "name": "extra_latents",
          "shape": 7,
          "type": "LATENT",
          "link": null
        },
        {
          "name": "add_cond_latents",
          "shape": 7,
          "type": "ADD_COND_LATENTS",
          "link": null
        },
        {
          "name": "width",
          "type": "INT",
          "widget": {
            "name": "width"
          },
          "link": 291
        },
        {
          "name": "height",
          "type": "INT",
          "widget": {
            "name": "height"
          },
          "link": 292
        },
        {
          "name": "num_frames",
          "type": "INT",
          "widget": {
            "name": "num_frames"
          },
          "link": 293
        }
      ],
      "outputs": [
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "links": [
            304
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoImageToVideoEncode"
      },
      "widgets_values": [
        832,
        480,
        81,
        0,
        1,
        1,
        true,
        false,
        false
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 161,
      "type": "GetNode",
      "pos": [
        6106.647196947695,
        -249.12999459299482
      ],
      "size": [
        210,
        34
      ],
      "flags": {
        "collapsed": true
      },
      "order": 15,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "WANVIDEOMODEL",
          "type": "WANVIDEOMODEL",
          "links": [
            303
          ]
        }
      ],
      "title": "Get_model",
      "properties": {},
      "widgets_values": [
        "model"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 162,
      "type": "GetNode",
      "pos": [
        6523.261473107896,
        152.3372480829541
      ],
      "size": [
        210,
        34
      ],
      "flags": {
        "collapsed": true
      },
      "order": 16,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "WANTEXTENCODER",
          "type": "WANTEXTENCODER",
          "links": [
            296
          ]
        }
      ],
      "title": "Get_text_encoder",
      "properties": {},
      "widgets_values": [
        "text_encoder"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 163,
      "type": "VHS_VideoCombine",
      "pos": [
        7088.245933788766,
        -399.1802506788877
      ],
      "size": [
        865.744639697281,
        1193.744639697281
      ],
      "flags": {},
      "order": 75,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 294
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0a75c7958fe320efcb052f1d9f8451fd20c730a8",
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "WanVideoWrapper_I2V",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": false,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "WanVideoWrapper_I2V_00052.mp4",
            "subfolder": "",
            "type": "temp",
            "format": "video/h264-mp4",
            "frame_rate": 16,
            "workflow": "WanVideoWrapper_I2V_00052.png",
            "fullpath": "N:\\AI\\ComfyUI\\temp\\WanVideoWrapper_I2V_00052.mp4"
          }
        }
      }
    },
    {
      "id": 164,
      "type": "Reroute",
      "pos": [
        7092.810390935902,
        -564.8913672192695
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 74,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 295
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "IMAGE",
          "links": [
            294
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      }
    },
    {
      "id": 165,
      "type": "WanVideoTextEncode",
      "pos": [
        6515.472714461579,
        204.14532731997966
      ],
      "size": [
        420.30511474609375,
        261.5306701660156
      ],
      "flags": {},
      "order": 32,
      "mode": 0,
      "inputs": [
        {
          "name": "t5",
          "shape": 7,
          "type": "WANTEXTENCODER",
          "link": 296
        },
        {
          "name": "model_to_offload",
          "shape": 7,
          "type": "WANVIDEOMODEL",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "text_embeds",
          "type": "WANVIDEOTEXTEMBEDS",
          "slot_index": 0,
          "links": [
            305
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoTextEncode"
      },
      "widgets_values": [
        "an old man crying",
        "色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走",
        true,
        false,
        "gpu"
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 166,
      "type": "RepeatImageBatch",
      "pos": [
        5480.79659993182,
        548.5108309960788
      ],
      "size": [
        270,
        58
      ],
      "flags": {
        "collapsed": true
      },
      "order": 66,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 297
        },
        {
          "name": "amount",
          "type": "INT",
          "widget": {
            "name": "amount"
          },
          "link": 298
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            285
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.65",
        "Node name for S&R": "RepeatImageBatch"
      },
      "widgets_values": [
        81
      ]
    },
    {
      "id": 167,
      "type": "INTConstant",
      "pos": [
        5475.088585328987,
        490.68377267184053
      ],
      "size": [
        200,
        58
      ],
      "flags": {
        "collapsed": true
      },
      "order": 17,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "value",
          "type": "INT",
          "links": [
            293,
            298
          ]
        }
      ],
      "title": "num_frames",
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "INTConstant"
      },
      "widgets_values": [
        81
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 168,
      "type": "InvertMask",
      "pos": [
        5716.770903645967,
        396.66280833421666
      ],
      "size": [
        140,
        26
      ],
      "flags": {
        "collapsed": true
      },
      "order": 68,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 299
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            290
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.65",
        "Node name for S&R": "InvertMask"
      }
    },
    {
      "id": 169,
      "type": "GetImageRangeFromBatch",
      "pos": [
        5764.877579397124,
        -415.58548822218404
      ],
      "size": [
        340.3267578125,
        102
      ],
      "flags": {},
      "order": 65,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "shape": 7,
          "type": "IMAGE",
          "link": 300
        },
        {
          "name": "masks",
          "shape": 7,
          "type": "MASK",
          "link": null
        },
        {
          "name": "num_frames",
          "type": "INT",
          "widget": {
            "name": "num_frames"
          },
          "link": 301
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            310
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "GetImageRangeFromBatch"
      },
      "widgets_values": [
        0,
        1
      ]
    },
    {
      "id": 170,
      "type": "Reroute",
      "pos": [
        5525.908412240749,
        387.2183559516344
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 63,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 302
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "IMAGE",
          "links": [
            284,
            297
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      }
    },
    {
      "id": 171,
      "type": "WanVideoSampler",
      "pos": [
        6109.2800571109,
        -181.7145071146443
      ],
      "size": [
        315,
        999
      ],
      "flags": {},
      "order": 70,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "WANVIDEOMODEL",
          "link": 303
        },
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "link": 304
        },
        {
          "name": "text_embeds",
          "shape": 7,
          "type": "WANVIDEOTEXTEMBEDS",
          "link": 305
        },
        {
          "name": "samples",
          "shape": 7,
          "type": "LATENT",
          "link": null
        },
        {
          "name": "feta_args",
          "shape": 7,
          "type": "FETAARGS",
          "link": null
        },
        {
          "name": "context_options",
          "shape": 7,
          "type": "WANVIDCONTEXT",
          "link": null
        },
        {
          "name": "cache_args",
          "shape": 7,
          "type": "CACHEARGS",
          "link": null
        },
        {
          "name": "flowedit_args",
          "shape": 7,
          "type": "FLOWEDITARGS",
          "link": null
        },
        {
          "name": "slg_args",
          "shape": 7,
          "type": "SLGARGS",
          "link": null
        },
        {
          "name": "loop_args",
          "shape": 7,
          "type": "LOOPARGS",
          "link": null
        },
        {
          "name": "experimental_args",
          "shape": 7,
          "type": "EXPERIMENTALARGS",
          "link": null
        },
        {
          "name": "sigmas",
          "shape": 7,
          "type": "SIGMAS",
          "link": null
        },
        {
          "name": "unianimate_poses",
          "shape": 7,
          "type": "UNIANIMATE_POSE",
          "link": null
        },
        {
          "name": "fantasytalking_embeds",
          "shape": 7,
          "type": "FANTASYTALKING_EMBEDS",
          "link": null
        },
        {
          "name": "uni3c_embeds",
          "shape": 7,
          "type": "UNI3C_EMBEDS",
          "link": null
        },
        {
          "name": "multitalk_embeds",
          "shape": 7,
          "type": "MULTITALK_EMBEDS",
          "link": null
        },
        {
          "name": "freeinit_args",
          "shape": 7,
          "type": "FREEINITARGS",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "slot_index": 0,
          "links": [
            309
          ]
        },
        {
          "name": "denoised_samples",
          "type": "LATENT",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoSampler"
      },
      "widgets_values": [
        8,
        1,
        5,
        0,
        "fixed",
        true,
        "euler",
        0,
        1,
        "",
        "comfy",
        0,
        -1,
        false
      ]
    },
    {
      "id": 172,
      "type": "GetImageSizeAndCount",
      "pos": [
        5401.128771760677,
        -599.4903921327877
      ],
      "size": [
        190.86484375,
        86
      ],
      "flags": {},
      "order": 60,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 314
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            300,
            306
          ]
        },
        {
          "label": "640 width",
          "name": "width",
          "type": "INT",
          "links": [
            291
          ]
        },
        {
          "label": "640 height",
          "name": "height",
          "type": "INT",
          "links": [
            292
          ]
        },
        {
          "label": "161 count",
          "name": "count",
          "type": "INT",
          "links": [
            286
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "GetImageSizeAndCount"
      }
    },
    {
      "id": 173,
      "type": "GetNode",
      "pos": [
        5459.345976719144,
        -187.71118433532558
      ],
      "size": [
        210,
        34
      ],
      "flags": {
        "collapsed": true
      },
      "order": 18,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "WANVAE",
          "type": "WANVAE",
          "links": [
            287,
            308
          ]
        }
      ],
      "title": "Get_VAE",
      "properties": {},
      "widgets_values": [
        "VAE"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 174,
      "type": "GetImageRangeFromBatch",
      "pos": [
        5761.081697756368,
        -598.4820594871425
      ],
      "size": [
        340.3267578125,
        102
      ],
      "flags": {},
      "order": 61,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "shape": 7,
          "type": "IMAGE",
          "link": 306
        },
        {
          "name": "masks",
          "shape": 7,
          "type": "MASK",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            302,
            307
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "GetImageRangeFromBatch"
      },
      "widgets_values": [
        -1,
        1
      ]
    },
    {
      "id": 176,
      "type": "GetNode",
      "pos": [
        6497.298606127693,
        -577.9395665582663
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            312
          ]
        }
      ],
      "title": "Get_init_image",
      "properties": {},
      "widgets_values": [
        "init_image"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 177,
      "type": "WanVideoDecode",
      "pos": [
        6511.618653339856,
        -150.10312522386218
      ],
      "size": [
        315,
        198
      ],
      "flags": {},
      "order": 71,
      "mode": 0,
      "inputs": [
        {
          "name": "vae",
          "type": "WANVAE",
          "link": 308
        },
        {
          "name": "samples",
          "type": "LATENT",
          "link": 309
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            311
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoDecode"
      },
      "widgets_values": [
        false,
        272,
        272,
        144,
        128,
        "default"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 178,
      "type": "ImageBatchMulti",
      "pos": [
        6507.171124216329,
        -403.70398406676276
      ],
      "size": [
        270,
        122
      ],
      "flags": {},
      "order": 72,
      "mode": 0,
      "inputs": [
        {
          "name": "image_1",
          "type": "IMAGE",
          "link": 310
        },
        {
          "name": "image_2",
          "shape": 7,
          "type": "IMAGE",
          "link": 311
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            313
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8"
      },
      "widgets_values": [
        2,
        null
      ]
    },
    {
      "id": 179,
      "type": "ColorMatch",
      "pos": [
        6767.059549306769,
        -618.5659970511288
      ],
      "size": [
        270,
        126
      ],
      "flags": {},
      "order": 73,
      "mode": 0,
      "inputs": [
        {
          "name": "image_ref",
          "type": "IMAGE",
          "link": 312
        },
        {
          "name": "image_target",
          "type": "IMAGE",
          "link": 313
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            295
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "6ee278aa7d802c03ad713a7c5fbc02861b6773a8",
        "Node name for S&R": "ColorMatch"
      },
      "widgets_values": [
        "mkl",
        1,
        true
      ]
    },
    {
      "id": 149,
      "type": "Reroute",
      "pos": [
        4118.672628767579,
        -608.0498432568002
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 58,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 283
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "IMAGE",
          "links": [
            261,
            314
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      }
    },
    {
      "id": 59,
      "type": "CLIPVisionLoader",
      "pos": [
        -1141.5086209742485,
        -236.21628644207811
      ],
      "size": [
        315,
        58
      ],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP_VISION",
          "type": "CLIP_VISION",
          "links": [
            70,
            315
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.26",
        "Node name for S&R": "CLIPVisionLoader"
      },
      "widgets_values": [
        "clip_vision_h.safetensors"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 180,
      "type": "SetNode",
      "pos": [
        -701.6144107807378,
        -295.6728416822763
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 33,
      "mode": 0,
      "inputs": [
        {
          "name": "CLIP_VISION",
          "type": "CLIP_VISION",
          "link": 315
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_clip_vision",
      "properties": {
        "previousName": "clip_vision"
      },
      "widgets_values": [
        "clip_vision"
      ]
    },
    {
      "id": 181,
      "type": "GetNode",
      "pos": [
        2344.2288229589863,
        -116.39967256521348
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 21,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP_VISION",
          "type": "CLIP_VISION",
          "links": [
            316
          ]
        }
      ],
      "title": "Get_clip_vision",
      "properties": {},
      "widgets_values": [
        "clip_vision"
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 175,
      "type": "WanVideoClipVisionEncode",
      "pos": [
        5312.257837830919,
        -6.290808772682283
      ],
      "size": [
        327.5999755859375,
        262
      ],
      "flags": {},
      "order": 64,
      "mode": 0,
      "inputs": [
        {
          "name": "clip_vision",
          "type": "CLIP_VISION",
          "link": 317
        },
        {
          "name": "image_1",
          "type": "IMAGE",
          "link": 307
        },
        {
          "name": "image_2",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "negative_image",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "image_embeds",
          "type": "WANVIDIMAGE_CLIPEMBEDS",
          "links": [
            288
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoClipVisionEncode"
      },
      "widgets_values": [
        1,
        1,
        "center",
        "average",
        true,
        0,
        0.20000000000000004
      ],
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 182,
      "type": "GetNode",
      "pos": [
        5322.506771233198,
        -92.97706776288666
      ],
      "size": [
        210,
        34
      ],
      "flags": {
        "collapsed": true
      },
      "order": 22,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP_VISION",
          "type": "CLIP_VISION",
          "links": [
            317
          ]
        }
      ],
      "title": "Get_clip_vision",
      "properties": {},
      "widgets_values": [
        "clip_vision"
      ],
      "color": "#233",
      "bgcolor": "#355"
    }
  ],
  "links": [
    [
      30,
      16,
      0,
      27,
      2,
      "WANVIDEOTEXTEMBEDS"
    ],
    [
      33,
      27,
      0,
      28,
      1,
      "LATENT"
    ],
    [
      36,
      28,
      0,
      30,
      0,
      "IMAGE"
    ],
    [
      43,
      38,
      0,
      28,
      0,
      "VAE"
    ],
    [
      52,
      48,
      0,
      49,
      0,
      "CLIP"
    ],
    [
      53,
      48,
      0,
      50,
      0,
      "CLIP"
    ],
    [
      54,
      49,
      0,
      46,
      0,
      "CONDITIONING"
    ],
    [
      55,
      50,
      0,
      46,
      1,
      "CONDITIONING"
    ],
    [
      66,
      63,
      0,
      27,
      1,
      "WANVIDIMAGE_EMBEDS"
    ],
    [
      70,
      59,
      0,
      65,
      0,
      "CLIP_VISION"
    ],
    [
      81,
      38,
      0,
      63,
      0,
      "WANVAE"
    ],
    [
      82,
      65,
      0,
      63,
      1,
      "WANVIDIMAGE_CLIPEMBEDS"
    ],
    [
      85,
      68,
      0,
      65,
      1,
      "IMAGE"
    ],
    [
      87,
      68,
      1,
      63,
      8,
      "INT"
    ],
    [
      88,
      68,
      2,
      63,
      9,
      "INT"
    ],
    [
      90,
      22,
      0,
      70,
      0,
      "WANVIDEOMODEL"
    ],
    [
      92,
      39,
      0,
      70,
      1,
      "BLOCKSWAPARGS"
    ],
    [
      94,
      70,
      0,
      71,
      0,
      "WANVIDEOMODEL"
    ],
    [
      98,
      35,
      0,
      22,
      0,
      "WANCOMPILEARGS"
    ],
    [
      143,
      68,
      0,
      63,
      2,
      "IMAGE"
    ],
    [
      147,
      58,
      0,
      68,
      0,
      "IMAGE"
    ],
    [
      150,
      69,
      0,
      72,
      0,
      "WANVIDLORA"
    ],
    [
      189,
      113,
      0,
      110,
      1,
      "LATENT"
    ],
    [
      190,
      114,
      1,
      111,
      0,
      "MASK"
    ],
    [
      192,
      117,
      0,
      113,
      1,
      "WANVIDIMAGE_EMBEDS"
    ],
    [
      193,
      116,
      0,
      113,
      2,
      "WANVIDEOTEXTEMBEDS"
    ],
    [
      195,
      112,
      0,
      114,
      2,
      "IMAGE"
    ],
    [
      196,
      121,
      0,
      115,
      0,
      "IMAGE"
    ],
    [
      197,
      114,
      0,
      117,
      2,
      "IMAGE"
    ],
    [
      198,
      111,
      0,
      117,
      5,
      "MASK"
    ],
    [
      199,
      121,
      3,
      118,
      0,
      "*"
    ],
    [
      200,
      121,
      0,
      119,
      0,
      "IMAGE"
    ],
    [
      201,
      118,
      0,
      119,
      2,
      "INT"
    ],
    [
      203,
      119,
      0,
      122,
      0,
      "IMAGE"
    ],
    [
      204,
      110,
      0,
      122,
      1,
      "IMAGE"
    ],
    [
      207,
      38,
      0,
      123,
      0,
      "*"
    ],
    [
      208,
      124,
      0,
      110,
      0,
      "WANVAE"
    ],
    [
      210,
      124,
      0,
      117,
      0,
      "WANVAE"
    ],
    [
      211,
      121,
      1,
      117,
      8,
      "INT"
    ],
    [
      212,
      121,
      2,
      117,
      9,
      "INT"
    ],
    [
      213,
      72,
      0,
      71,
      1,
      "WANVIDLORA"
    ],
    [
      214,
      71,
      0,
      125,
      0,
      "*"
    ],
    [
      215,
      126,
      0,
      27,
      0,
      "WANVIDEOMODEL"
    ],
    [
      216,
      11,
      0,
      127,
      0,
      "*"
    ],
    [
      218,
      129,
      0,
      16,
      0,
      "WANTEXTENCODER"
    ],
    [
      219,
      130,
      0,
      113,
      0,
      "WANVIDEOMODEL"
    ],
    [
      220,
      131,
      0,
      116,
      0,
      "WANTEXTENCODER"
    ],
    [
      237,
      28,
      0,
      121,
      0,
      "IMAGE"
    ],
    [
      261,
      149,
      0,
      120,
      0,
      "IMAGE"
    ],
    [
      263,
      150,
      0,
      117,
      10,
      "INT"
    ],
    [
      264,
      150,
      0,
      112,
      1,
      "INT"
    ],
    [
      270,
      115,
      0,
      151,
      0,
      "*"
    ],
    [
      271,
      151,
      0,
      112,
      0,
      "IMAGE"
    ],
    [
      272,
      151,
      0,
      114,
      0,
      "IMAGE"
    ],
    [
      277,
      115,
      0,
      154,
      1,
      "IMAGE"
    ],
    [
      278,
      154,
      0,
      117,
      1,
      "WANVIDIMAGE_CLIPEMBEDS"
    ],
    [
      279,
      68,
      0,
      156,
      0,
      "*"
    ],
    [
      280,
      157,
      0,
      155,
      0,
      "IMAGE"
    ],
    [
      282,
      122,
      0,
      155,
      1,
      "IMAGE"
    ],
    [
      283,
      155,
      0,
      149,
      0,
      "*"
    ],
    [
      284,
      170,
      0,
      158,
      0,
      "IMAGE"
    ],
    [
      285,
      166,
      0,
      158,
      2,
      "IMAGE"
    ],
    [
      286,
      172,
      3,
      159,
      0,
      "*"
    ],
    [
      287,
      173,
      0,
      160,
      0,
      "WANVAE"
    ],
    [
      288,
      175,
      0,
      160,
      1,
      "WANVIDIMAGE_CLIPEMBEDS"
    ],
    [
      289,
      158,
      0,
      160,
      2,
      "IMAGE"
    ],
    [
      290,
      168,
      0,
      160,
      5,
      "MASK"
    ],
    [
      291,
      172,
      1,
      160,
      8,
      "INT"
    ],
    [
      292,
      172,
      2,
      160,
      9,
      "INT"
    ],
    [
      293,
      167,
      0,
      160,
      10,
      "INT"
    ],
    [
      294,
      164,
      0,
      163,
      0,
      "IMAGE"
    ],
    [
      295,
      179,
      0,
      164,
      0,
      "*"
    ],
    [
      296,
      162,
      0,
      165,
      0,
      "WANTEXTENCODER"
    ],
    [
      297,
      170,
      0,
      166,
      0,
      "IMAGE"
    ],
    [
      298,
      167,
      0,
      166,
      1,
      "INT"
    ],
    [
      299,
      158,
      1,
      168,
      0,
      "MASK"
    ],
    [
      300,
      172,
      0,
      169,
      0,
      "IMAGE"
    ],
    [
      301,
      159,
      0,
      169,
      2,
      "INT"
    ],
    [
      302,
      174,
      0,
      170,
      0,
      "*"
    ],
    [
      303,
      161,
      0,
      171,
      0,
      "WANVIDEOMODEL"
    ],
    [
      304,
      160,
      0,
      171,
      1,
      "WANVIDIMAGE_EMBEDS"
    ],
    [
      305,
      165,
      0,
      171,
      2,
      "WANVIDEOTEXTEMBEDS"
    ],
    [
      306,
      172,
      0,
      174,
      0,
      "IMAGE"
    ],
    [
      307,
      174,
      0,
      175,
      1,
      "IMAGE"
    ],
    [
      308,
      173,
      0,
      177,
      0,
      "WANVAE"
    ],
    [
      309,
      171,
      0,
      177,
      1,
      "LATENT"
    ],
    [
      310,
      169,
      0,
      178,
      0,
      "IMAGE"
    ],
    [
      311,
      177,
      0,
      178,
      1,
      "IMAGE"
    ],
    [
      312,
      176,
      0,
      179,
      0,
      "IMAGE"
    ],
    [
      313,
      178,
      0,
      179,
      1,
      "IMAGE"
    ],
    [
      314,
      149,
      0,
      172,
      0,
      "IMAGE"
    ],
    [
      315,
      59,
      0,
      180,
      0,
      "*"
    ],
    [
      316,
      181,
      0,
      154,
      0,
      "CLIP_VISION"
    ],
    [
      317,
      182,
      0,
      175,
      0,
      "CLIP_VISION"
    ]
  ],
  "groups": [
    {
      "id": 1,
      "title": "ComfyUI text encoding alternative",
      "bounding": [
        98.44351937523635,
        1135.50348486378,
        1210.621337890625,
        805.9080810546875
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 2,
      "title": "Group",
      "bounding": [
        2297.286787864614,
        -785.6252185374616,
        2816.1790489953783,
        1668.0333700447109
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 4,
      "title": "Models",
      "bounding": [
        -1334.414218735923,
        -1613.109539657678,
        1616.041172447207,
        1233.494336025311
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 5,
      "title": "Group",
      "bounding": [
        5271.424550032937,
        -742.4667424999309,
        2816.1790489953783,
        1668.0333700447109
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.45949729863575484,
      "offset": [
        -2449.900656368284,
        1241.6039811636015
      ]
    },
    "frontendVersion": "1.30.1",
    "node_versions": {
      "ComfyUI-WanVideoWrapper": "5a2383621a05825d0d0437781afcb8552d9590fd",
      "comfy-core": "0.3.26",
      "ComfyUI-KJNodes": "a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f",
      "ComfyUI-VideoHelperSuite": "0a75c7958fe320efcb052f1d9f8451fd20c730a8"
    },
    "VHS_latentpreview": true,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}
